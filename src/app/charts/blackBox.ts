export const supabaseData = [
  {
    created_at: '2024-01-03T04:04:54.837086+00:00', // Miércoles
    invoice_id: '1320028452',
    transaction_amount: {
      total: 29635,
      kitchen: 17500,
      delivery: {
        tip: 1179,
        service: 4000
      },
      earnings: 2521,
      influencer: 2500,
      mercadopago: 1935
    },
    id: '512eb415-44c2-4647-9c7c-861bd5d33930'
  },
  {
    created_at: '2024-02-05T04:04:54.837086+00:00', // Viernes
    invoice_id: '1320028450',
    transaction_amount: {
      total: 29635,
      kitchen: 17500,
      delivery: {
        tip: 1179,
        service: 4000
      },
      earnings: 2521,
      influencer: 2500,
      mercadopago: 1935
    },
    id: '6f6a41cc-22d8-4bf5-8948-1e73d6def3e7'
  },
  {
    created_at: '2024-03-01T04:04:54.837086+00:00', // Domingo
    invoice_id: '1320028454',
    transaction_amount: {
      total: 29635,
      kitchen: 17500,
      delivery: {
        tip: 1179,
        service: 4000
      },
      earnings: 2521,
      influencer: 2500,
      mercadopago: 1935
    }
  },
  {
    created_at: '2024-04-02T04:04:54.837086+00:00', // Lunes
    invoice_id: '1320028455',
    transaction_amount: {
      total: 29635,
      kitchen: 17500,
      delivery: {
        tip: 1179,
        service: 4000
      },
      earnings: 2521,
      influencer: 2500,
      mercadopago: 1935
    },
    id: 'c287fe50-ede2-428f-a4f0-2969b6c5f8b8'
  },
  {
    created_at: '2024-05-07T04:04:54.837086+00:00', // Jueves
    invoice_id: '1320028451',
    transaction_amount: {
      total: 29635,
      kitchen: 17500,
      delivery: {
        tip: 1179,
        service: 4000
      },
      earnings: 2521,
      influencer: 2500,
      mercadopago: 1935
    },
    id: 'c58299fa-3142-45ce-a2ad-9deda78784b9'
  },
  {
    created_at: '2024-06-10T04:04:54.837086+00:00', // Domingo
    invoice_id: '1320028442',
    transaction_amount: {
      total: 29635,
      kitchen: 17500,
      delivery: {
        tip: 1179,
        service: 4000
      },
      earnings: 2521,
      influencer: 2500,
      mercadopago: 1935
    },
    id: '512eb415-44c2-4647-9c7c-861bd5d33930'
  },
  {
    created_at: '2024-07-03T04:04:54.837086+00:00', // Miércoles
    invoice_id: '1320028432',
    transaction_amount: {
      total: 29635,
      kitchen: 17500,
      delivery: {
        tip: 1179,
        service: 4000
      },
      earnings: 2521,
      influencer: 2500,
      mercadopago: 1935
    },
    id: '512eb415-44c2-4647-9c7c-861bd5d33930'
  },
  {
    created_at: '2024-08-05T04:04:54.837086+00:00', // Viernes
    invoice_id: '1320028462',
    transaction_amount: {
      total: 29635,
      kitchen: 17500,
      delivery: {
        tip: 1179,
        service: 4000
      },
      earnings: 2521,
      influencer: 2500,
      mercadopago: 1935
    },
    id: '712eb415-44c2-4647-9c7c-861bd5d33931'
  },
  {
    created_at: '2024-09-06T04:04:54.837086+00:00', // Sábado
    invoice_id: '1320028472',
    transaction_amount: {
      total: 29635,
      kitchen: 17500,
      delivery: {
        tip: 1179,
        service: 4000
      },
      earnings: 2521,
      influencer: 2500,
      mercadopago: 1935
    },
    id: '812eb415-44c2-4647-9c7c-861bd5d33932'
  },
  {
    created_at: '2024-10-02T04:04:54.837086+00:00', // Lunes
    invoice_id: '1320028482',
    transaction_amount: {
      total: 29635,
      kitchen: 17500,
      delivery: {
        tip: 1179,
        service: 4000
      },
      earnings: 2521,
      influencer: 2500,
      mercadopago: 1935
    },
    id: '912eb415-44c2-4647-9c7c-861bd5d33933'
  },
  {
    created_at: '2024-11-07T04:04:54.837086+00:00', // Jueves
    invoice_id: '1320028492',
    transaction_amount: {
      total: 29635,
      kitchen: 17500,
      delivery: {
        tip: 1179,
        service: 4000
      },
      earnings: 2521,
      influencer: 2500,
      mercadopago: 1935
    },
    id: '1012eb415-44c2-4647-9c7c-861bd5d33934'
  },
  {
    created_at: '2024-12-04T04:04:54.837086+00:00', // Miércoles
    invoice_id: '1320028502',
    transaction_amount: {
      total: 29635,
      kitchen: 17500,
      delivery: {
        tip: 1179,
        service: 4000
      },
      earnings: 2521,
      influencer: 2500,
      mercadopago: 1935
    },
    id: '1112eb415-44c2-4647-9c7c-861bd5d33935'
  }
]

export const labelSets = {
  año: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'],
  mes: ['semana 1', 'semana 2', 'semana 3', 'semana 4'],
  semana: ['Domingo', 'Lunes', 'Martes', 'Miércoles', 'Jueves', 'Viernes', 'Sábado'],
  personalizado: ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre']
}

export function getDateDetails (dateStr: string) {
  const date = new Date(dateStr)
  const year = date.getUTCFullYear()
  const month = date.getUTCMonth() + 1
  const day = date.getUTCDate()
  const weekOfMonth = Math.ceil(day / 7)
  const dayOfWeek = date.getUTCDay() + 1

  return { year, month, weekOfMonth, day: dayOfWeek }
}

const monthMap: { [key: string]: number } = {
  enero: 1,
  febrero: 2,
  marzo: 3,
  abril: 4,
  mayo: 5,
  junio: 6,
  julio: 7,
  agosto: 8,
  septiembre: 9,
  octubre: 10,
  noviembre: 11,
  diciembre: 12
}

export function groupEarningsByCategory (data: any, mode: any) {
  const { category, year, month, weekOfMonth } = mode

  let earningsGrouped: any

  switch (category) {
    case 'año':
      earningsGrouped = new Array(12).fill(0)
      break
    case 'mes':
      earningsGrouped = new Array(4).fill(0)
      break
    case 'semana':
      earningsGrouped = new Array(7).fill(0)
      break
    default:
      earningsGrouped = new Array(12).fill(0)
      break
  }

  data
    .filter((current: any) => {
      const yearMatch = current.date.year === Number(year)
      const monthMatch = current.date.month === monthMap[month.toLowerCase()]
      const weekMatch = current.date.weekOfMonth === Number(weekOfMonth)

      switch (category) {
        case 'semana':
          return yearMatch && monthMatch && weekMatch
        case 'mes':
          return yearMatch && monthMatch
        case 'año':
          return yearMatch
        default:
          return true
      }
    })
    .forEach((current: any) => {
      switch (category) {
        case 'año':
          earningsGrouped[current.date.month - 1] += current.earning
          break
        case 'mes':
          earningsGrouped[current.date.weekOfMonth - 1] += current.earning
          break
        case 'semana':
          earningsGrouped[current.date.day - 1] += current.earning
          break
        default:
          earningsGrouped[current.date.month - 1] += current.earning
          break
      }
    })

  return earningsGrouped
}
